"use strict";System.register(["react","../../lib/string","../../lib/timer"],function(_export,_context){"use strict";var React,id,isNumeric,throttle,_createClass,BaseText,TextInput,TextArea,AutoComplete;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}return{setters:[function(_react){React=_react.default},function(_libString){id=_libString.id;isNumeric=_libString.isNumeric},function(_libTimer){throttle=_libTimer.throttle}],execute:function(){_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();BaseText=function(_React$Component){_inherits(BaseText,_React$Component);function BaseText(props){_classCallCheck(this,BaseText);var _this=_possibleConstructorReturn(this,(BaseText.__proto__||Object.getPrototypeOf(BaseText)).call(this,props));_this.state={error:false};return _this}_createClass(BaseText,[{key:"handleChange",value:function handleChange(evt){var value=evt.target.value;this.setState({error:this.hasError(value)});if(this.props.handler){this.props.handler(value)}}},{key:"handleBlur",value:function handleBlur(){this.setState({error:this.hasError(this.props.value)})}},{key:"hasError",value:function hasError(value){value=value||"";var requiredError=this.props.required&&value=="";var formatError=this.props.numeric&&value!=""?!isNumeric(value):false;return requiredError||formatError}},{key:"getClassName",value:function getClassName(){return"row-input"+(this.state.error?" error":"")}}]);return BaseText}(React.Component);_export("TextInput",TextInput=function(_BaseText){_inherits(TextInput,_BaseText);function TextInput(){_classCallCheck(this,TextInput);return _possibleConstructorReturn(this,(TextInput.__proto__||Object.getPrototypeOf(TextInput)).apply(this,arguments))}_createClass(TextInput,[{key:"render",value:function render(){var inputId="input_"+id(this.props.label);return React.createElement("div",{className:this.getClassName()},React.createElement("label",{htmlFor:inputId},this.props.label," ",this.props.required?React.createElement("span",{className:"required"},"*"):null),React.createElement("input",{id:inputId,type:"text",value:this.props.value,onChange:this.handleChange.bind(this),onBlur:this.handleBlur.bind(this)}),this.props.note?React.createElement("div",null,React.createElement("small",null,this.props.note)):null)}}]);return TextInput}(BaseText));_export("TextInput",TextInput);_export("TextArea",TextArea=function(_BaseText2){_inherits(TextArea,_BaseText2);function TextArea(){_classCallCheck(this,TextArea);return _possibleConstructorReturn(this,(TextArea.__proto__||Object.getPrototypeOf(TextArea)).apply(this,arguments))}_createClass(TextArea,[{key:"render",value:function render(){var inputId="input_"+id(this.props.label);return React.createElement("div",{className:this.getClassName()},React.createElement("label",{htmlFor:inputId},this.props.label," ",this.props.required?React.createElement("span",{className:"required"},"*"):null),React.createElement("textarea",{id:inputId,type:"text",value:this.props.value,onChange:this.handleChange.bind(this),onBlur:this.handleBlur.bind(this)}))}}]);return TextArea}(BaseText));_export("TextArea",TextArea);_export("AutoComplete",AutoComplete=function(_BaseText3){_inherits(AutoComplete,_BaseText3);function AutoComplete(props){_classCallCheck(this,AutoComplete);var _this4=_possibleConstructorReturn(this,(AutoComplete.__proto__||Object.getPrototypeOf(AutoComplete)).call(this,props));_this4.state.value=props.value||"";_this4.update=throttle(_this4.callHandler.bind(_this4));return _this4}_createClass(AutoComplete,[{key:"componentWillUpdate",value:function componentWillUpdate(nextProps,nextState){if(nextProps.value!==this.props.value){this.setState({error:false,value:nextProps.value})}}},{key:"callHandler",value:function callHandler(value){if(this.props.handler){this.props.handler(value)}}},{key:"selectItem",value:function selectItem(evt){var value=evt.target.getAttribute("data-value");this.callHandler(value)}},{key:"handleChange",value:function handleChange(evt){var value=evt.target.value;this.setState({error:this.hasError(value),value:value});this.update(value)}},{key:"render",value:function render(){var _this5=this;var inputId="input_"+id(this.props.label);var filter=this.state.value.toLowerCase();var values=filter==""?[]:this.props.values.filter(function(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().indexOf(filter)!=-1});if(values.length==1&&values[0]==this.state.value){values=[]}return React.createElement("div",{className:this.getClassName()+" row-filter"},React.createElement("label",{htmlFor:inputId},this.props.label," ",this.props.required?React.createElement("span",{className:"required"},"*"):null),React.createElement("input",{id:inputId,type:"text",value:this.state.value,onChange:this.handleChange.bind(this),onBlur:this.handleBlur.bind(this)}),this.props.note?React.createElement("div",null,React.createElement("small",null,this.props.note)):null,values.length>0?React.createElement("ul",null,values.map(function(m){return React.createElement("li",{onClick:_this5.selectItem.bind(_this5),"data-value":m},m)})):null)}}]);return AutoComplete}(BaseText));_export("AutoComplete",AutoComplete)}}});